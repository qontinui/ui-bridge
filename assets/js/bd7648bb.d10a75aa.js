"use strict";(globalThis.webpackChunkui_bridge_docs=globalThis.webpackChunkui_bridge_docs||[]).push([[9074],{3510(e,r,n){n.r(r),n.d(r,{assets:()=>a,contentTitle:()=>d,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"server/express","title":"Express Integration","description":"Integrate UI Bridge with your existing Express.js server.","source":"@site/docs/server/express.md","sourceDirName":"server","slug":"/server/express","permalink":"/ui-bridge/docs/server/express","draft":false,"unlisted":false,"editUrl":"https://github.com/qontinui/ui-bridge/tree/main/docs-site/docs/server/express.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Server Overview","permalink":"/ui-bridge/docs/server/overview"},"next":{"title":"Next.js Integration","permalink":"/ui-bridge/docs/server/nextjs"}}');var s=n(4848),t=n(8453);const o={sidebar_position:2},d="Express Integration",a={},l=[{value:"Installation",id:"installation",level:2},{value:"Basic Setup",id:"basic-setup",level:2},{value:"Configuration",id:"configuration",level:2},{value:"With Authentication",id:"with-authentication",level:2},{value:"With Existing API",id:"with-existing-api",level:2},{value:"Registry Connection",id:"registry-connection",level:2},{value:"Option 1: Shared Process (SSR)",id:"option-1-shared-process-ssr",level:3},{value:"Option 2: WebSocket Bridge",id:"option-2-websocket-bridge",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"TypeScript",id:"typescript",level:2},{value:"Complete Example",id:"complete-example",level:2}];function p(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"express-integration",children:"Express Integration"})}),"\n",(0,s.jsx)(r.p,{children:"Integrate UI Bridge with your existing Express.js server."}),"\n",(0,s.jsx)(r.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"npm install ui-bridge-server\n"})}),"\n",(0,s.jsx)(r.h2,{id:"basic-setup",children:"Basic Setup"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import express from 'express';\nimport { uiBridgeMiddleware } from 'ui-bridge-server/express';\n\nconst app = express();\n\n// Add UI Bridge middleware\napp.use('/ui-bridge', uiBridgeMiddleware());\n\napp.listen(3000, () => {\n  console.log('Server running on http://localhost:3000');\n  console.log('UI Bridge available at http://localhost:3000/ui-bridge');\n});\n"})}),"\n",(0,s.jsx)(r.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"app.use('/ui-bridge', uiBridgeMiddleware({\n  // Enable/disable features\n  features: {\n    control: true,\n    renderLog: true,\n    debug: process.env.NODE_ENV === 'development',\n  },\n\n  // CORS configuration\n  cors: {\n    origin: ['http://localhost:3000', 'http://localhost:5173'],\n    credentials: true,\n  },\n\n  // Request logging\n  logging: true,\n}));\n"})}),"\n",(0,s.jsx)(r.h2,{id:"with-authentication",children:"With Authentication"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import { authMiddleware } from './auth';\n\n// Protect all UI Bridge endpoints\napp.use('/ui-bridge', authMiddleware, uiBridgeMiddleware());\n\n// Or protect specific endpoints\nconst bridge = uiBridgeMiddleware();\napp.get('/ui-bridge/control/*', authMiddleware, bridge);\napp.post('/ui-bridge/control/*', authMiddleware, bridge);\napp.get('/ui-bridge/render-log', bridge); // Public\n"})}),"\n",(0,s.jsx)(r.h2,{id:"with-existing-api",children:"With Existing API"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import express from 'express';\nimport { uiBridgeMiddleware } from 'ui-bridge-server/express';\n\nconst app = express();\n\n// Your existing API routes\napp.use('/api', yourApiRoutes);\n\n// UI Bridge on a separate path\napp.use('/ui-bridge', uiBridgeMiddleware());\n\n// Or combine with your API\napp.use('/api/ui-bridge', uiBridgeMiddleware());\n"})}),"\n",(0,s.jsx)(r.h2,{id:"registry-connection",children:"Registry Connection"}),"\n",(0,s.jsx)(r.p,{children:"The middleware needs access to the UI Bridge registry. Options:"}),"\n",(0,s.jsx)(r.h3,{id:"option-1-shared-process-ssr",children:"Option 1: Shared Process (SSR)"}),"\n",(0,s.jsx)(r.p,{children:"If your Express server renders the React app:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import { getGlobalRegistry } from 'ui-bridge';\nimport { uiBridgeMiddleware } from 'ui-bridge-server/express';\n\napp.use('/ui-bridge', uiBridgeMiddleware({\n  registry: getGlobalRegistry(),\n}));\n"})}),"\n",(0,s.jsx)(r.h3,{id:"option-2-websocket-bridge",children:"Option 2: WebSocket Bridge"}),"\n",(0,s.jsx)(r.p,{children:"For separate frontend/backend:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import { uiBridgeMiddleware, createWebSocketBridge } from 'ui-bridge-server/express';\n\nconst wss = createWebSocketBridge({ port: 9877 });\n\napp.use('/ui-bridge', uiBridgeMiddleware({\n  bridge: wss,\n}));\n"})}),"\n",(0,s.jsx)(r.p,{children:"In React:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-tsx",children:"<UIBridgeProvider\n  config={{\n    websocketUrl: 'ws://localhost:9877',\n  }}\n>\n"})}),"\n",(0,s.jsx)(r.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"app.use('/ui-bridge', uiBridgeMiddleware({\n  onError: (error, req, res) => {\n    console.error('UI Bridge error:', error);\n    res.status(500).json({\n      success: false,\n      error: error.message,\n    });\n  },\n}));\n"})}),"\n",(0,s.jsx)(r.h2,{id:"typescript",children:"TypeScript"}),"\n",(0,s.jsx)(r.p,{children:"Full TypeScript support:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import express, { Request, Response } from 'express';\nimport {\n  uiBridgeMiddleware,\n  UIBridgeMiddlewareOptions,\n} from 'ui-bridge-server/express';\n\nconst options: UIBridgeMiddlewareOptions = {\n  features: {\n    control: true,\n    renderLog: true,\n  },\n};\n\napp.use('/ui-bridge', uiBridgeMiddleware(options));\n"})}),"\n",(0,s.jsx)(r.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"import express from 'express';\nimport cors from 'cors';\nimport { uiBridgeMiddleware } from 'ui-bridge-server/express';\n\nconst app = express();\n\n// Middleware\napp.use(cors());\napp.use(express.json());\n\n// Your routes\napp.get('/api/health', (req, res) => {\n  res.json({ status: 'ok' });\n});\n\n// UI Bridge\napp.use('/ui-bridge', uiBridgeMiddleware({\n  features: {\n    control: true,\n    renderLog: true,\n    debug: process.env.NODE_ENV === 'development',\n  },\n  logging: true,\n}));\n\n// Error handling\napp.use((err, req, res, next) => {\n  console.error(err);\n  res.status(500).json({ error: 'Internal server error' });\n});\n\nconst PORT = process.env.PORT || 3000;\napp.listen(PORT, () => {\n  console.log(`Server: http://localhost:${PORT}`);\n  console.log(`UI Bridge: http://localhost:${PORT}/ui-bridge`);\n});\n"})})]})}function c(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},8453(e,r,n){n.d(r,{R:()=>o,x:()=>d});var i=n(6540);const s={},t=i.createContext(s);function o(e){const r=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(t.Provider,{value:r},e.children)}}}]);