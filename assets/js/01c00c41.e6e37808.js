"use strict";(globalThis.webpackChunkui_bridge_docs=globalThis.webpackChunkui_bridge_docs||[]).push([[2213],{5659(e,t,n){n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"advanced/component-state-exposure","title":"Component State Exposure","description":"Component State Exposure allows you to expose internal component state to UI Bridge, making it accessible for inspection and automation.","source":"@site/docs/advanced/component-state-exposure.md","sourceDirName":"advanced","slug":"/advanced/component-state-exposure","permalink":"/ui-bridge/docs/advanced/component-state-exposure","draft":false,"unlisted":false,"editUrl":"https://github.com/qontinui/ui-bridge/tree/main/docs-site/docs/advanced/component-state-exposure.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Cross-Framework Support","permalink":"/ui-bridge/docs/advanced/cross-framework-support"},"next":{"title":"Web / Next.js Guide","permalink":"/ui-bridge/docs/guides/web"}}');var a=n(4848),i=n(8453);const o={},r="Component State Exposure",c={},l=[{value:"Overview",id:"overview",level:2},{value:"Basic State Exposure",id:"basic-state-exposure",level:2},{value:"React Hook",id:"react-hook",level:3},{value:"Access Exposed State",id:"access-exposed-state",level:3},{value:"State Types",id:"state-types",level:2},{value:"Primitive Values",id:"primitive-values",level:3},{value:"Objects and Arrays",id:"objects-and-arrays",level:3},{value:"Computed State",id:"computed-state",level:3},{value:"Form State",id:"form-state",level:2},{value:"Expose Form Values",id:"expose-form-values",level:3},{value:"Access Form State",id:"access-form-state",level:3},{value:"State Namespacing",id:"state-namespacing",level:2},{value:"Component Scoping",id:"component-scoping",level:3},{value:"Access Namespaced State",id:"access-namespaced-state",level:3},{value:"State Watchers",id:"state-watchers",level:2},{value:"Watch for Changes",id:"watch-for-changes",level:3},{value:"Wait for State",id:"wait-for-state",level:3},{value:"Selective Exposure",id:"selective-exposure",level:2},{value:"Only Expose What&#39;s Needed",id:"only-expose-whats-needed",level:3},{value:"Conditional Exposure",id:"conditional-exposure",level:3},{value:"State Metadata",id:"state-metadata",level:2},{value:"Add Metadata to State",id:"add-metadata-to-state",level:3},{value:"Vue Integration",id:"vue-integration",level:2},{value:"Angular Integration",id:"angular-integration",level:2},{value:"State Snapshots",id:"state-snapshots",level:2},{value:"Get All Exposed State",id:"get-all-exposed-state",level:3},{value:"Diff State",id:"diff-state",level:3},{value:"Best Practices",id:"best-practices",level:2}];function d(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"component-state-exposure",children:"Component State Exposure"})}),"\n",(0,a.jsx)(t.p,{children:"Component State Exposure allows you to expose internal component state to UI Bridge, making it accessible for inspection and automation."}),"\n",(0,a.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(t.p,{children:"State exposure enables:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Access to React component state"}),"\n",(0,a.jsx)(t.li,{children:"Computed/derived state visibility"}),"\n",(0,a.jsx)(t.li,{children:"Form state inspection"}),"\n",(0,a.jsx)(t.li,{children:"Custom state hooks"}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"basic-state-exposure",children:"Basic State Exposure"}),"\n",(0,a.jsx)(t.h3,{id:"react-hook",children:"React Hook"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"import { useExposeState } from '@anthropic/ui-bridge/react';\n\nfunction Counter() {\n  const [count, setCount] = useState(0);\n\n  // Expose count to UI Bridge\n  useExposeState('counter', { count });\n\n  return (\n    <div>\n      <p>Count: {count}</p>\n      <button onClick={() => setCount(c => c + 1)}>Increment</button>\n    </div>\n  );\n}\n"})}),"\n",(0,a.jsx)(t.h3,{id:"access-exposed-state",children:"Access Exposed State"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"// From automation client\nconst state = await client.getComponentState('counter');\nconsole.log(state.count); // 5\n"})}),"\n",(0,a.jsx)(t.h2,{id:"state-types",children:"State Types"}),"\n",(0,a.jsx)(t.h3,{id:"primitive-values",children:"Primitive Values"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"useExposeState('settings', {\n  darkMode: true,\n  language: 'en',\n  fontSize: 16,\n});\n"})}),"\n",(0,a.jsx)(t.h3,{id:"objects-and-arrays",children:"Objects and Arrays"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"useExposeState('cart', {\n  items: [\n    { id: 1, name: 'Product', quantity: 2 },\n    { id: 2, name: 'Another', quantity: 1 },\n  ],\n  total: 99.99,\n});\n"})}),"\n",(0,a.jsx)(t.h3,{id:"computed-state",children:"Computed State"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"function ShoppingCart({ items }) {\n  const subtotal = items.reduce((sum, item) => sum + item.price * item.quantity, 0);\n  const tax = subtotal * 0.08;\n  const total = subtotal + tax;\n\n  useExposeState('cart-totals', {\n    subtotal,\n    tax,\n    total,\n    itemCount: items.length,\n  });\n\n  return <div>...</div>;\n}\n"})}),"\n",(0,a.jsx)(t.h2,{id:"form-state",children:"Form State"}),"\n",(0,a.jsx)(t.h3,{id:"expose-form-values",children:"Expose Form Values"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"function LoginForm() {\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    rememberMe: false,\n  });\n\n  const [errors, setErrors] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  useExposeState('login-form', {\n    values: formData,\n    errors,\n    isSubmitting,\n    isValid: Object.keys(errors).length === 0,\n  });\n\n  return <form>...</form>;\n}\n"})}),"\n",(0,a.jsx)(t.h3,{id:"access-form-state",children:"Access Form State"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"// Check form state before submission\nconst formState = await client.getComponentState('login-form');\n\nif (formState.isValid && !formState.isSubmitting) {\n  await client.executeAction('submit-btn', 'click');\n}\n"})}),"\n",(0,a.jsx)(t.h2,{id:"state-namespacing",children:"State Namespacing"}),"\n",(0,a.jsx)(t.h3,{id:"component-scoping",children:"Component Scoping"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"// In UserProfile component\nuseExposeState('user-profile.details', {\n  name: user.name,\n  email: user.email,\n});\n\nuseExposeState('user-profile.preferences', {\n  theme: user.preferences.theme,\n  notifications: user.preferences.notifications,\n});\n"})}),"\n",(0,a.jsx)(t.h3,{id:"access-namespaced-state",children:"Access Namespaced State"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"const details = await client.getComponentState('user-profile.details');\nconst prefs = await client.getComponentState('user-profile.preferences');\n\n// Or get all under namespace\nconst userProfile = await client.getComponentState('user-profile.*');\n"})}),"\n",(0,a.jsx)(t.h2,{id:"state-watchers",children:"State Watchers"}),"\n",(0,a.jsx)(t.h3,{id:"watch-for-changes",children:"Watch for Changes"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"// From automation client\nconst unwatch = client.watchState('cart', (state, prevState) => {\n  console.log(`Cart updated: ${prevState.total} -> ${state.total}`);\n});\n\n// Later: unwatch()\n"})}),"\n",(0,a.jsx)(t.h3,{id:"wait-for-state",children:"Wait for State"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"// Wait for specific state condition\nawait client.waitForState('cart', (state) => state.items.length > 0);\n\n// With timeout\nawait client.waitForState('login', (state) => state.isAuthenticated, {\n  timeout: 5000,\n});\n"})}),"\n",(0,a.jsx)(t.h2,{id:"selective-exposure",children:"Selective Exposure"}),"\n",(0,a.jsx)(t.h3,{id:"only-expose-whats-needed",children:"Only Expose What's Needed"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"function UserDashboard({ user }) {\n  // Don't expose sensitive data\n  useExposeState('user', {\n    id: user.id,\n    name: user.name,\n    // Don't include: user.password, user.ssn, user.creditCard\n  });\n}\n"})}),"\n",(0,a.jsx)(t.h3,{id:"conditional-exposure",children:"Conditional Exposure"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"function AdminPanel({ isAdmin, adminData }) {\n  useExposeState('admin', isAdmin ? {\n    userCount: adminData.userCount,\n    revenue: adminData.revenue,\n  } : null);\n}\n"})}),"\n",(0,a.jsx)(t.h2,{id:"state-metadata",children:"State Metadata"}),"\n",(0,a.jsx)(t.h3,{id:"add-metadata-to-state",children:"Add Metadata to State"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"useExposeState('order', {\n  status: order.status,\n  total: order.total,\n}, {\n  metadata: {\n    lastUpdated: Date.now(),\n    source: 'api',\n  },\n  description: 'Current order state',\n});\n"})}),"\n",(0,a.jsx)(t.h2,{id:"vue-integration",children:"Vue Integration"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-vue",children:"<script setup>\nimport { ref } from 'vue';\nimport { useExposeState } from '@anthropic/ui-bridge-vue';\n\nconst count = ref(0);\n\nuseExposeState('counter', () => ({\n  count: count.value,\n}));\n<\/script>\n"})}),"\n",(0,a.jsx)(t.h2,{id:"angular-integration",children:"Angular Integration"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"@Component({...})\nexport class CounterComponent {\n  count = 0;\n\n  constructor(private uiBridge: UIBridgeService) {\n    this.uiBridge.exposeState('counter', () => ({\n      count: this.count,\n    }));\n  }\n}\n"})}),"\n",(0,a.jsx)(t.h2,{id:"state-snapshots",children:"State Snapshots"}),"\n",(0,a.jsx)(t.h3,{id:"get-all-exposed-state",children:"Get All Exposed State"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"const snapshot = await client.getStateSnapshot();\n\nconsole.log(snapshot);\n// {\n//   'counter': { count: 5 },\n//   'cart': { items: [...], total: 99.99 },\n//   'login-form': { values: {...}, isValid: true },\n// }\n"})}),"\n",(0,a.jsx)(t.h3,{id:"diff-state",children:"Diff State"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"const before = await client.getStateSnapshot();\nawait client.executeAction('add-to-cart-btn', 'click');\nconst after = await client.getStateSnapshot();\n\nconst diff = client.diffState(before, after);\n// { 'cart.items': { added: [...] }, 'cart.total': { old: 99.99, new: 149.99 } }\n"})}),"\n",(0,a.jsx)(t.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Expose Only Needed State"})," - Don't expose everything"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Never Expose Sensitive Data"})," - Passwords, tokens, PII"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Use Namespacing"})," - Organize state logically"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Keep State Flat"})," - Avoid deeply nested structures"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Update Synchronously"})," - Ensure state reflects actual component state"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Document Exposed State"})," - List what state is available"]}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453(e,t,n){n.d(t,{R:()=>o,x:()=>r});var s=n(6540);const a={},i=s.createContext(a);function o(e){const t=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);