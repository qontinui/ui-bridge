"use strict";(globalThis.webpackChunkui_bridge_docs=globalThis.webpackChunkui_bridge_docs||[]).push([[2160],{7525(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>g,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"concepts/registry","title":"Registry","description":"The UI Bridge Registry is a central store for all registered elements, components, and workflows. It manages the lifecycle of controllable UI items and provides methods for lookup and state inspection.","source":"@site/docs/concepts/registry.md","sourceDirName":"concepts","slug":"/concepts/registry","permalink":"/ui-bridge/docs/concepts/registry","draft":false,"unlisted":false,"editUrl":"https://github.com/qontinui/ui-bridge/tree/main/docs-site/docs/concepts/registry.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Element Identification","permalink":"/ui-bridge/docs/concepts/element-identification"},"next":{"title":"Actions","permalink":"/ui-bridge/docs/concepts/actions"}}');var i=t(4848),r=t(8453);const o={sidebar_position:2},l="Registry",c={},a=[{value:"Overview",id:"overview",level:2},{value:"Element Registration",id:"element-registration",level:2},{value:"Registering Elements",id:"registering-elements",level:3},{value:"Getting Element State",id:"getting-element-state",level:3},{value:"Listing All Elements",id:"listing-all-elements",level:3},{value:"Unregistering Elements",id:"unregistering-elements",level:3},{value:"Component Registration",id:"component-registration",level:2},{value:"Executing Component Actions",id:"executing-component-actions",level:3},{value:"Workflow Registration",id:"workflow-registration",level:2},{value:"Event System",id:"event-system",level:2},{value:"Event Types",id:"event-types",level:3},{value:"Snapshots",id:"snapshots",level:2},{value:"Global Registry",id:"global-registry",level:2},{value:"Statistics",id:"statistics",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"registry",children:"Registry"})}),"\n",(0,i.jsx)(n.p,{children:"The UI Bridge Registry is a central store for all registered elements, components, and workflows. It manages the lifecycle of controllable UI items and provides methods for lookup and state inspection."}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { UIBridgeRegistry, getGlobalRegistry } from 'ui-bridge';\n\n// Get the global registry\nconst registry = getGlobalRegistry();\n\n// Or create a new instance\nconst customRegistry = new UIBridgeRegistry({\n  verbose: true,\n  onEvent: (event) => console.log(event),\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"element-registration",children:"Element Registration"}),"\n",(0,i.jsx)(n.h3,{id:"registering-elements",children:"Registering Elements"}),"\n",(0,i.jsxs)(n.p,{children:["Elements are typically registered via the ",(0,i.jsx)(n.code,{children:"useUIElement"})," hook, but can also be registered directly:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const registry = getGlobalRegistry();\n\n// Register an element\nconst registered = registry.registerElement('my-button', buttonElement, {\n  type: 'button',\n  label: 'My Button',\n  actions: ['click', 'focus', 'blur'],\n});\n\n// Get element info\nconsole.log(registered.id);       // 'my-button'\nconsole.log(registered.type);     // 'button'\nconsole.log(registered.actions);  // ['click', 'focus', 'blur']\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getting-element-state",children:"Getting Element State"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const element = registry.getElement('my-button');\nif (element) {\n  const state = element.getState();\n  console.log(state.visible);   // true\n  console.log(state.enabled);   // true\n  console.log(state.focused);   // false\n  console.log(state.rect);      // { x, y, width, height, ... }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"listing-all-elements",children:"Listing All Elements"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const elements = registry.getAllElements();\nelements.forEach(el => {\n  console.log(`${el.id}: ${el.type}`);\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"unregistering-elements",children:"Unregistering Elements"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"registry.unregisterElement('my-button');\n"})}),"\n",(0,i.jsx)(n.h2,{id:"component-registration",children:"Component Registration"}),"\n",(0,i.jsx)(n.p,{children:"Components represent higher-level UI constructs with custom actions:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const component = registry.registerComponent('login-form', {\n  name: 'Login Form',\n  description: 'User authentication form',\n  actions: [\n    {\n      id: 'login',\n      label: 'Login',\n      description: 'Authenticate user',\n      handler: async (params) => {\n        const { email, password } = params;\n        return await authenticate(email, password);\n      },\n    },\n    {\n      id: 'reset',\n      label: 'Reset Form',\n      handler: () => {\n        // Reset form state\n      },\n    },\n  ],\n  elementIds: ['login-email', 'login-password', 'login-submit'],\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"executing-component-actions",children:"Executing Component Actions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const component = registry.getComponent('login-form');\nconst action = component.actions.find(a => a.id === 'login');\nconst result = await action.handler({ email: 'user@example.com', password: 'secret' });\n"})}),"\n",(0,i.jsx)(n.h2,{id:"workflow-registration",children:"Workflow Registration"}),"\n",(0,i.jsx)(n.p,{children:"Workflows define multi-step automation sequences:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const workflow = registry.registerWorkflow({\n  id: 'checkout-flow',\n  name: 'Checkout Flow',\n  description: 'Complete a purchase',\n  steps: [\n    {\n      id: 'add-to-cart',\n      type: 'action',\n      target: 'add-to-cart-btn',\n      action: 'click',\n    },\n    {\n      id: 'go-to-cart',\n      type: 'action',\n      target: 'cart-link',\n      action: 'click',\n    },\n    {\n      id: 'enter-email',\n      type: 'action',\n      target: 'checkout-email',\n      action: 'type',\n      params: { text: '{{email}}' },\n    },\n    {\n      id: 'submit',\n      type: 'action',\n      target: 'checkout-submit',\n      action: 'click',\n    },\n  ],\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"event-system",children:"Event System"}),"\n",(0,i.jsx)(n.p,{children:"The registry emits events for state changes:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Listen for element registration\nconst unsubscribe = registry.on('element:registered', (event) => {\n  console.log(`Element registered: ${event.data.id}`);\n});\n\n// Listen for element unregistration\nregistry.on('element:unregistered', (event) => {\n  console.log(`Element removed: ${event.data.id}`);\n});\n\n// Remove listener\nunsubscribe();\n// or\nregistry.off('element:registered', listener);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"event-types",children:"Event Types"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Event"}),(0,i.jsx)(n.th,{children:"Data"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"element:registered"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"{ id, type, label }"})}),(0,i.jsx)(n.td,{children:"Element was registered"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"element:unregistered"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"{ id }"})}),(0,i.jsx)(n.td,{children:"Element was unregistered"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"component:registered"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"{ id, name }"})}),(0,i.jsx)(n.td,{children:"Component was registered"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"component:unregistered"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"{ id }"})}),(0,i.jsx)(n.td,{children:"Component was unregistered"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"snapshots",children:"Snapshots"}),"\n",(0,i.jsx)(n.p,{children:"Create a complete snapshot of the registry state:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const snapshot = registry.createSnapshot();\n\nconsole.log(snapshot.timestamp);   // Unix timestamp\nconsole.log(snapshot.elements);    // Array of element info\nconsole.log(snapshot.components);  // Array of component info\nconsole.log(snapshot.workflows);   // Array of workflow info\n"})}),"\n",(0,i.jsx)(n.h2,{id:"global-registry",children:"Global Registry"}),"\n",(0,i.jsx)(n.p,{children:"UI Bridge maintains a global registry instance:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import {\n  getGlobalRegistry,\n  setGlobalRegistry,\n  resetGlobalRegistry,\n} from 'ui-bridge';\n\n// Get the global registry (creates one if none exists)\nconst registry = getGlobalRegistry();\n\n// Set a custom registry as global\nconst customRegistry = new UIBridgeRegistry();\nsetGlobalRegistry(customRegistry);\n\n// Reset (clears and removes the global registry)\nresetGlobalRegistry();\n"})}),"\n",(0,i.jsx)(n.h2,{id:"statistics",children:"Statistics"}),"\n",(0,i.jsx)(n.p,{children:"Get registry statistics:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const stats = registry.getStats();\nconsole.log(stats.elementCount);         // Total elements\nconsole.log(stats.componentCount);       // Total components\nconsole.log(stats.workflowCount);        // Total workflows\nconsole.log(stats.mountedElementCount);  // Currently mounted elements\nconsole.log(stats.mountedComponentCount); // Currently mounted components\n"})})]})}function g(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,t){t.d(n,{R:()=>o,x:()=>l});var s=t(6540);const i={},r=s.createContext(i);function o(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);