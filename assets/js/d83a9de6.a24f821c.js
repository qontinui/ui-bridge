"use strict";(globalThis.webpackChunkui_bridge_docs=globalThis.webpackChunkui_bridge_docs||[]).push([[3761],{653(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"api/state-endpoints","title":"State API Endpoints","description":"This page documents the state management REST API endpoints provided by UI Bridge.","source":"@site/docs/api/state-endpoints.md","sourceDirName":"api","slug":"/api/state-endpoints","permalink":"/ui-bridge/docs/api/state-endpoints","draft":false,"unlisted":false,"editUrl":"https://github.com/qontinui/ui-bridge/tree/main/docs-site/docs/api/state-endpoints.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"AI API Endpoints","permalink":"/ui-bridge/docs/api/ai-endpoints"},"next":{"title":"React Example App","permalink":"/ui-bridge/docs/examples/react-app"}}');var i=s(4848),r=s(8453);const d={},a="State API Endpoints",c={},o=[{value:"Base URL",id:"base-url",level:2},{value:"Endpoints",id:"endpoints",level:2},{value:"Get Current State",id:"get-current-state",level:3},{value:"List All States",id:"list-all-states",level:3},{value:"Get State Details",id:"get-state-details",level:3},{value:"Validate State",id:"validate-state",level:3},{value:"Navigate to State",id:"navigate-to-state",level:3},{value:"Execute Transition",id:"execute-transition",level:3},{value:"Find Path",id:"find-path",level:3},{value:"Get Discovered States",id:"get-discovered-states",level:3},{value:"Get Component State",id:"get-component-state",level:3},{value:"Get All Component States",id:"get-all-component-states",level:3},{value:"Watch State Changes",id:"watch-state-changes",level:3},{value:"Export State Machine",id:"export-state-machine",level:3},{value:"Import State Machine",id:"import-state-machine",level:3},{value:"Error Responses",id:"error-responses",level:2},{value:"Common Error Codes",id:"common-error-codes",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"state-api-endpoints",children:"State API Endpoints"})}),"\n",(0,i.jsx)(n.p,{children:"This page documents the state management REST API endpoints provided by UI Bridge."}),"\n",(0,i.jsx)(n.h2,{id:"base-url",children:"Base URL"}),"\n",(0,i.jsxs)(n.p,{children:["All state endpoints are prefixed with ",(0,i.jsx)(n.code,{children:"/__ui-bridge__/state/"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,i.jsx)(n.h3,{id:"get-current-state",children:"Get Current State"}),"\n",(0,i.jsx)(n.p,{children:"Get the current state machine state."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /__ui-bridge__/state/current\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "state": {\n    "id": "logged-in",\n    "description": "User is authenticated",\n    "enteredAt": 1705312200000,\n    "indicators": {\n      "element-exists:#user-menu": true,\n      "url-matches:/dashboard/": true\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"list-all-states",children:"List All States"}),"\n",(0,i.jsx)(n.p,{children:"List all defined states."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /__ui-bridge__/state/list\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "states": [\n    {\n      "id": "logged-out",\n      "description": "User not authenticated",\n      "indicators": ["element-exists:#login-form"]\n    },\n    {\n      "id": "logged-in",\n      "description": "User authenticated",\n      "indicators": ["element-exists:#user-menu"]\n    },\n    {\n      "id": "dashboard",\n      "description": "Main dashboard view",\n      "indicators": ["url-matches:/dashboard/"]\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"get-state-details",children:"Get State Details"}),"\n",(0,i.jsx)(n.p,{children:"Get details about a specific state."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /__ui-bridge__/state/:stateId\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "state": {\n    "id": "logged-in",\n    "description": "User is authenticated",\n    "indicators": [\n      { "type": "element-exists", "selector": "#user-menu" },\n      { "type": "element-not-exists", "selector": "#login-form" }\n    ],\n    "transitions": {\n      "outgoing": ["logged-in -> dashboard", "logged-in -> logged-out"],\n      "incoming": ["logged-out -> logged-in"]\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"validate-state",children:"Validate State"}),"\n",(0,i.jsx)(n.p,{children:"Check if a state's indicators match current UI."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"POST /__ui-bridge__/state/validate\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "stateId": "logged-in"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "valid": true,\n  "indicators": {\n    "element-exists:#user-menu": { "expected": true, "actual": true },\n    "element-not-exists:#login-form": { "expected": true, "actual": true }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"navigate-to-state",children:"Navigate to State"}),"\n",(0,i.jsx)(n.p,{children:"Navigate to a target state."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"POST /__ui-bridge__/state/navigate\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "target": "dashboard",\n  "variables": {\n    "email": "user@example.com",\n    "password": "secret"\n  },\n  "options": {\n    "timeout": 30000\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "path": ["logged-out -> logged-in", "logged-in -> dashboard"],\n  "currentState": "dashboard",\n  "duration": 2500\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"execute-transition",children:"Execute Transition"}),"\n",(0,i.jsx)(n.p,{children:"Execute a specific state transition."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"POST /__ui-bridge__/state/transition\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "transition": "logged-out -> logged-in",\n  "variables": {\n    "email": "user@example.com",\n    "password": "secret"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "from": "logged-out",\n  "to": "logged-in",\n  "duration": 1200\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"find-path",children:"Find Path"}),"\n",(0,i.jsx)(n.p,{children:"Find a path between two states."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"POST /__ui-bridge__/state/find-path\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "from": "logged-out",\n  "to": "checkout"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "path": [\n    "logged-out -> logged-in",\n    "logged-in -> products",\n    "products -> cart",\n    "cart -> checkout"\n  ],\n  "steps": 4\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"get-discovered-states",children:"Get Discovered States"}),"\n",(0,i.jsx)(n.p,{children:"Get states discovered by dynamic state discovery."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /__ui-bridge__/state/discovered\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "states": [\n    {\n      "id": "state-abc123",\n      "signature": {\n        "url": "/products",\n        "domFingerprint": "abc123"\n      },\n      "discoveredAt": 1705312200000,\n      "visitCount": 5\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"get-component-state",children:"Get Component State"}),"\n",(0,i.jsx)(n.p,{children:"Get exposed component state."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /__ui-bridge__/state/component/:componentId\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "componentId": "counter",\n  "state": {\n    "count": 5,\n    "isLoading": false\n  },\n  "lastUpdated": 1705312200000\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"get-all-component-states",children:"Get All Component States"}),"\n",(0,i.jsx)(n.p,{children:"Get all exposed component states."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /__ui-bridge__/state/components\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "components": {\n    "counter": { "count": 5 },\n    "cart": { "items": [], "total": 0 },\n    "user": { "name": "John", "email": "john@example.com" }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"watch-state-changes",children:"Watch State Changes"}),"\n",(0,i.jsx)(n.p,{children:"Subscribe to state change events (Server-Sent Events)."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /__ui-bridge__/state/watch\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response (SSE stream):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'event: stateChange\ndata: {"from": "logged-out", "to": "logged-in", "timestamp": 1705312200000}\n\nevent: componentUpdate\ndata: {"component": "cart", "state": {"items": [...]}, "timestamp": 1705312201000}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"export-state-machine",children:"Export State Machine"}),"\n",(0,i.jsx)(n.p,{children:"Export the state machine configuration."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /__ui-bridge__/state/export\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Query Parameters:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"format"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"json"})," or ",(0,i.jsx)(n.code,{children:"mermaid"})]})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response (JSON):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "stateMachine": {\n    "states": {...},\n    "transitions": {...},\n    "initialState": "logged-out"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response (Mermaid):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "diagram": "stateDiagram-v2\\n  [*] --\x3e logged_out\\n  logged_out --\x3e logged_in: login\\n  ..."\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"import-state-machine",children:"Import State Machine"}),"\n",(0,i.jsx)(n.p,{children:"Import a state machine configuration."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"POST /__ui-bridge__/state/import\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request Body:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "stateMachine": {\n    "states": {\n      "logged-out": {...},\n      "logged-in": {...}\n    },\n    "transitions": {...}\n  },\n  "merge": false\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "imported": {\n    "states": 5,\n    "transitions": 8\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"error-responses",children:"Error Responses"}),"\n",(0,i.jsx)(n.p,{children:"All endpoints return errors in this format:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": false,\n  "error": {\n    "code": "STATE_NOT_FOUND",\n    "message": "State \'unknown\' does not exist",\n    "details": {\n      "requestedState": "unknown",\n      "availableStates": ["logged-out", "logged-in", "dashboard"]\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"common-error-codes",children:"Common Error Codes"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Code"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"STATE_NOT_FOUND"})}),(0,i.jsx)(n.td,{children:"Requested state doesn't exist"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TRANSITION_NOT_FOUND"})}),(0,i.jsx)(n.td,{children:"Requested transition doesn't exist"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"NO_PATH_FOUND"})}),(0,i.jsx)(n.td,{children:"Cannot find path between states"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TRANSITION_FAILED"})}),(0,i.jsx)(n.td,{children:"Transition execution failed"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"INVALID_STATE_CONFIG"})}),(0,i.jsx)(n.td,{children:"Invalid state machine configuration"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"COMPONENT_NOT_FOUND"})}),(0,i.jsx)(n.td,{children:"Component state not exposed"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453(e,n,s){s.d(n,{R:()=>d,x:()=>a});var t=s(6540);const i={},r=t.createContext(i);function d(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);